import{B as Y,Cb as P,Eb as k,Ga as a,Ra as ee,W as m,_ as f,ab as S,ba as _,c as X,cb as b,cc as N,db as te,dc as T,eb as re,fa as c,gb as oe,gc as q,hb as h,ia as l,ib as x,ic as O,kb as ie,lb as E,lc as L,mb as w,mc as R,nb as p,pa as n,pb as F,qa as r,qb as M,ra as s,rc as D,sc as B,tb as y,tc as ne,vb as I,vc as j,wb as A,xa as C}from"./chunk-3TQJQBFK.js";var le=X(ne());function ve(e,t){e&1&&(n(0,"mat-error"),a(1,"Email is required"),r())}function Ce(e,t){e&1&&(n(0,"mat-error"),a(1,"Enter a valid email"),r())}function Se(e,t){e&1&&(n(0,"mat-error"),a(1,"Password is required"),r())}function be(e,t){e&1&&(n(0,"mat-error"),a(1,"Password must be at least 6 characters and include an uppercase, lowercase, number, and special character."),r())}var G=class e{constructor(t,i,o){this.fb=t;this.api=i;this.router=o;this.loginForm=this.fb.group({email:["",[p.required,p.email]],password:["",[p.required,p.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[^A-Za-z0-9]).{6,}$/)]]})}loginForm;onSubmit(){if(!this.loginForm.valid){this.loginForm.markAllAsTouched();return}let t=this.loginForm.value;console.log("Form Data:",t),this.api.login(t).subscribe({next:i=>{this.loginForm.reset(),localStorage.setItem("accessToken",i.token),localStorage.setItem("role",i.role),i.role==="Admin"?this.router.navigateByUrl("/admin/home"):i.role==="User"&&this.router.navigateByUrl("/user/home")},error:i=>{le.default.fire({title:"Error!",text:i.error.message||"Login failed. Please try again.",icon:"error",confirmButtonText:"OK"})}})}static \u0275fac=function(i){return new(i||e)(f(P),f(j),f(h))};static \u0275cmp=_({type:e,selectors:[["app-login"]],decls:22,vars:5,consts:[[1,"login-container"],[1,"login-wrapper"],[1,"login-form",3,"ngSubmit","formGroup"],["appearance","fill",1,"full-width"],["matInput","","formControlName","email","type","email"],[4,"ngIf"],["matInput","","formControlName","password","type","password"],["mat-raised-button","","color","primary","type","submit",1,"full-width"],[1,"register-link"],["routerLink","/signup"]],template:function(i,o){if(i&1&&(n(0,"div",0)(1,"div",1)(2,"form",2),C("ngSubmit",function(){return o.onSubmit()}),n(3,"mat-form-field",3)(4,"mat-label"),a(5,"Email"),r(),s(6,"input",4),c(7,ve,2,0,"mat-error",5)(8,Ce,2,0,"mat-error",5),r(),n(9,"mat-form-field",3)(10,"mat-label"),a(11,"Password"),r(),s(12,"input",6),c(13,Se,2,0,"mat-error",5)(14,be,2,0,"mat-error",5),r(),n(15,"button",7),a(16," Login "),r()()(),n(17,"div",8)(18,"p"),a(19,"Don't have an account? "),n(20,"a",9),a(21,"Register here"),r()()()()),i&2){let u,g,d,v;m(2),l("formGroup",o.loginForm),m(5),l("ngIf",(u=o.loginForm.get("email"))==null?null:u.hasError("required")),m(),l("ngIf",(g=o.loginForm.get("email"))==null?null:g.hasError("email")),m(5),l("ngIf",(d=o.loginForm.get("password"))==null?null:d.hasError("required")),m(),l("ngIf",(v=o.loginForm.get("password"))==null?null:v.hasError("pattern"))}},dependencies:[k,y,w,F,M,I,A,O,q,N,T,R,L,B,D,b,S,E,x],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;background-color:#f0f2f5}.full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}.login-container[_ngcontent-%COMP%]{background-image:url(/images/bg-image.jpg);background-size:cover;background-position:center;width:100%}.login-wrapper[_ngcontent-%COMP%]{height:89vh;display:flex;justify-content:center;align-items:center}.login-form[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:16px;box-shadow:0 0 20px #0000001a;width:470px;display:flex;flex-direction:column;gap:1rem}.register-link[_ngcontent-%COMP%]{text-align:center;margin-top:1rem}.register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#3f51b5;text-decoration:none;cursor:pointer}"]})};var z=X(ne());function xe(e,t){e&1&&(n(0,"mat-error"),a(1,"Name is required"),r())}function Ee(e,t){e&1&&(n(0,"mat-error"),a(1,"Enter a valid name"),r())}function we(e,t){e&1&&(n(0,"mat-error"),a(1,"Email is required"),r())}function Fe(e,t){e&1&&(n(0,"mat-error"),a(1,"Enter a valid email"),r())}function Me(e,t){e&1&&(n(0,"mat-error"),a(1,"Phone is required"),r())}function ye(e,t){e&1&&(n(0,"mat-error"),a(1,"Enter a valid phone"),r())}function Ie(e,t){e&1&&(n(0,"mat-error"),a(1,"Password is required"),r())}function Ae(e,t){e&1&&(n(0,"mat-error"),a(1,"Password must be at least 6 characters and include an uppercase, lowercase, number, and special character."),r())}function Pe(e,t){e&1&&(n(0,"mat-error"),a(1,"Confirm Password is required"),r())}function ke(e,t){e&1&&(n(0,"mat-error"),a(1,"Passwords do not match."),r())}var V=class e{constructor(t,i,o){this.fb=t;this.api=i;this.router=o;this.signupForm=this.fb.group({name:["",[p.required]],phone:["",[p.required,p.pattern(/^[6-9]\d{9}$/)]],email:["",[p.required,p.email]],password:["",[p.required,p.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[^A-Za-z0-9]).{6,}$/)]],confirm_password:["",[p.required]]},{validator:this.matchPasswords("password","confirm_password")})}signupForm;matchPasswords(t,i){return o=>{let u=o.get(t)?.value,g=o.get(i)?.value;if(u!==g)return o.get(i)?.setErrors({passwordMismatch:!0}),{passwordMismatch:!0};{let d=o.get(i)?.errors;return d&&(delete d.passwordMismatch,Object.keys(d).length===0&&o.get(i)?.setErrors(null)),null}}}onSubmit(){if(!this.signupForm.valid){this.signupForm.markAllAsTouched();return}let t=this.signupForm.value;t.id=0,t.status="active",t.role="User";let i={name:t.name,phone:t.phone,email:t.email,password:t.password,id:t.id,status:t.status,role:t.role};this.api.signup(i).subscribe({next:o=>{this.signupForm.reset(),z.default.fire({title:"Success!",text:"Registration successful. Please log in.",icon:"success",confirmButtonText:"OK"}).then(()=>{this.router.navigateByUrl("/login")})},error:o=>{z.default.fire({title:"Error!",text:o.error.message||"Login failed. Please try again.",icon:"error",confirmButtonText:"OK"})}})}static \u0275fac=function(i){return new(i||e)(f(P),f(j),f(h))};static \u0275cmp=_({type:e,selectors:[["app-signup"]],decls:40,vars:11,consts:[[1,"login-container"],[1,"login-wrapper"],[1,"login-form",3,"ngSubmit","formGroup"],["appearance","fill",1,"full-width"],["matInput","","formControlName","name","type","text"],[4,"ngIf"],["matInput","","formControlName","email","type","email"],["matInput","","formControlName","phone","type","text"],["matInput","","formControlName","password","type","password"],["matInput","","formControlName","confirm_password","type","password"],["mat-raised-button","","color","primary","type","submit",1,"full-width"],[1,"register-link"],["routerLink","/login"]],template:function(i,o){if(i&1&&(n(0,"div",0)(1,"div",1)(2,"form",2),C("ngSubmit",function(){return o.onSubmit()}),n(3,"mat-form-field",3)(4,"mat-label"),a(5,"Name"),r(),s(6,"input",4),c(7,xe,2,0,"mat-error",5)(8,Ee,2,0,"mat-error",5),r(),n(9,"mat-form-field",3)(10,"mat-label"),a(11,"Email"),r(),s(12,"input",6),c(13,we,2,0,"mat-error",5)(14,Fe,2,0,"mat-error",5),r(),n(15,"mat-form-field",3)(16,"mat-label"),a(17,"Phone"),r(),s(18,"input",7),c(19,Me,2,0,"mat-error",5)(20,ye,2,0,"mat-error",5),r(),n(21,"mat-form-field",3)(22,"mat-label"),a(23,"Password"),r(),s(24,"input",8),c(25,Ie,2,0,"mat-error",5)(26,Ae,2,0,"mat-error",5),r(),n(27,"mat-form-field",3)(28,"mat-label"),a(29,"Confirm Password"),r(),s(30,"input",9),c(31,Pe,2,0,"mat-error",5)(32,ke,2,0,"mat-error",5),r(),n(33,"button",10),a(34," Sign Up "),r()()(),n(35,"div",11)(36,"p"),a(37,"Already have an account? "),n(38,"a",12),a(39,"Login here"),r()()()()),i&2){let u,g,d,v,$,H,J,K,Q,W;m(2),l("formGroup",o.signupForm),m(5),l("ngIf",(u=o.signupForm.get("name"))==null?null:u.hasError("required")),m(),l("ngIf",(g=o.signupForm.get("name"))==null?null:g.hasError("name")),m(5),l("ngIf",(d=o.signupForm.get("email"))==null?null:d.hasError("required")),m(),l("ngIf",(v=o.signupForm.get("email"))==null?null:v.hasError("email")),m(5),l("ngIf",($=o.signupForm.get("phone"))==null?null:$.hasError("required")),m(),l("ngIf",(H=o.signupForm.get("phone"))==null?null:H.hasError("pattern")),m(5),l("ngIf",(J=o.signupForm.get("password"))==null?null:J.hasError("required")),m(),l("ngIf",(K=o.signupForm.get("password"))==null?null:K.hasError("pattern")),m(5),l("ngIf",(Q=o.signupForm.get("confirm_password"))==null?null:Q.hasError("required")),m(),l("ngIf",(W=o.signupForm.get("confirm_password"))==null?null:W.hasError("passwordMismatch"))}},dependencies:[k,y,w,F,M,I,A,O,q,N,T,R,L,B,D,b,S,E,x],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;background-color:#f0f2f5}.full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:2px}.login-container[_ngcontent-%COMP%]{background-image:url(/images/bg-image.jpg);background-size:cover;background-position:center;width:100%}.login-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.login-form[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:16px;box-shadow:0 0 20px #0000001a;width:470px;display:flex;flex-direction:column;gap:1rem}.register-link[_ngcontent-%COMP%]{text-align:center;margin-top:1rem}.register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#3f51b5;text-decoration:none;cursor:pointer}"]})};var Z=(e,t)=>{let i=Y(h);return localStorage.getItem("accessToken")?!0:(i.navigate(["/login"]),!1)};var pe=[{path:"admin",loadChildren:()=>import("./chunk-R4O3QLIA.js").then(e=>e.AdminModule),canActivate:[Z]},{path:"login",component:G},{path:"user",loadChildren:()=>import("./chunk-JM74MR4V.js").then(e=>e.UserModule),canActivate:[Z]},{path:"",redirectTo:"login",pathMatch:"full"},{path:"signup",component:V}];var se={providers:[ee({eventCoalescing:!0}),ie(pe),re()]};var U=class e{title="electro-ecom";static \u0275fac=function(i){return new(i||e)};static \u0275cmp=_({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(i,o){i&1&&s(0,"router-outlet")},dependencies:[oe],encapsulation:2})};te(U,se).catch(e=>console.error(e));
